<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">


		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic|Open+Sans:400,400italic,600,600italic,700,700italic|Inconsolata:400,700">
		<link rel="stylesheet" href="/docs/css/main.css">
		<link rel="apple-touch-icon" href="/docs/images/apple-touch-icon.png">
		<link rel="icon" type="image/png" href="/docs/images/touch-icon.png" sizes="192x192">
		<link rel="icon" type="image/png" href="/docs/images/favicon.png">

		
	</head>

	<body>
		<header>
			<h1>
				<a href="/docs/"><img src="/docs/images/emblem.svg" width="40" height="40" alt="ATD文档中心 logo"></a>
				ATD文档中心
				<button type="button" class="open-nav" id="open-nav"></button>
			</h1>
			<!--
			<form action="/docs/search/" method="get">
				<input type="text" name="q" id="search-input" placeholder="搜索" autofocus>
				<input type="submit" value="search" style="display: none;">
			</form>
		-->
			<nav class="full-navigation">
				<ul>
					<li class="nav-item top-level ">
						
						<a href="/docs/">ATD新手入门文档</a>
					</li>
				</ul>

				<ul>
					
					
						<li class="nav-item "><a href="/docs/%E9%AB%98%E7%BA%A7%E8%AE%A1%E7%AE%97%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%AD%96%E7%95%A5%E8%AE%BE%E7%BD%AE/">高级计算模式的策略设置</a></li>
					
						<li class="nav-item "><a href="/docs/%E9%AB%98%E7%BA%A7%E6%90%9C%E7%B4%A2%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/">高级搜索说明文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E5%87%A0%E7%A7%8D%E6%8E%A8%E6%97%A5%E5%BF%97%E6%96%B9%E5%BC%8F%E4%BB%8B%E7%BB%8D/">几种推日志方式介绍</a></li>
					
						<li class="nav-item "><a href="/docs/%E5%8F%AF%E7%BC%96%E7%A8%8B%E5%AF%B9%E6%8A%97-%E9%AB%98%E7%BA%A7%E8%A7%84%E5%88%99/">可编程对抗-高级规则</a></li>
					
						<li class="nav-item current"><a href="/docs/%E5%8F%AF%E7%BC%96%E7%A8%8B%E5%AF%B9%E6%8A%97%E6%A8%A1%E5%9E%8B%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/">可编程对抗模型说明文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E8%BD%AE%E8%AF%A2%E5%91%A8%E6%9C%9F%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/">轮询周期使用文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E5%86%85%E7%BD%91%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A4%84%E7%90%86%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/">内网自定义处理接口文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE%E6%96%87%E6%A1%A3/">日志配置文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E7%AE%97%E6%B3%95%E6%A8%A1%E5%9E%8B%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3/">算法模型开发文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E5%BE%AE%E4%BF%A1%E5%91%8A%E8%AD%A6%E5%AF%B9%E6%8E%A5%E6%93%8D%E4%BD%9C%E6%96%87%E6%A1%A3/">微信告警对接操作文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E8%87%AA%E5%8A%A8%E8%B0%83%E6%95%B4%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/">运行环境自动调整接口文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E6%89%A7%E8%A1%8C%E5%8A%A8%E4%BD%9C%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/">执行动作使用文档</a></li>
					
						<li class="nav-item "><a href="/docs/%E6%99%BA%E8%83%BD%E6%97%A5%E5%BF%97%E8%A7%A3%E6%9E%90/">智能日志解析</a></li>
					
						<li class="nav-item "><a href="/docs/%E8%B5%84%E4%BA%A7%E5%8F%91%E7%8E%B0/">资产发现</a></li>
					
						<li class="nav-item "><a href="/docs/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3/">自定义处理方式接口开发文档</a></li>
					
						<li class="nav-item "><a href="/docs/FAQ/">FAQ</a></li>
					
				</ul>

			</nav>
		</header>

		<section class="main">
			<div class="page-header">
				<h2>ATD文档中心</h2>
				<h3>可编程对抗模型说明文档</h3>
			</div>
			<article class="content">
				<h1 id="1可编程对抗">1、可编程对抗</h1>
<p>ATD支持根据实际业务场景，完全贴合自身业务，通过灵活的参数和策略设置，自定义模型来对抗特定的威胁，丰富和完善安全场景。</p>
<h1 id="2设置可编程对抗模型步骤">2、设置可编程对抗模型步骤</h1>
<h5 id="第一步设置模型">第一步、设置模型</h5>
<h5 id="第二步设置参数">第二步、设置参数</h5>
<h5 id="第三步设置策略">第三步、设置策略</h5>
<h2 id="21设置模型">2.1、设置模型</h2>
<p>在可编程对抗模型中，点击“添加”按钮，即可添加模型。根据实际需求，输入对应的【名称】及【描述】。
<img src="/docs/images/log/2.1策略设置.png" alt="策略设置" /></p>
<h2 id="22设置参数">2.2、设置参数</h2>
<h3 id="221什么是参数">2.2.1、什么是参数？</h3>
<p>参数表示对日志字段做处理/计算的方式，用于后面的策略设置。
点击“参数管理”，即可进行参数设置。
<img src="/docs/images/log/2.2.1参数设置.png" alt="参数设置" /></p>
<h3 id="221如何添加参数">2.2.1、如何添加参数？</h3>
<p>点击“添加”按钮，进行添加参数。
<img src="/docs/images/log/2.2.1添加参数.png" alt="参数设置" />
添加参数有3个需要设置的内容，包括：条件、参数算法、参数名称。</p>
<h4 id="1条件">1、条件</h4>
<p>选择需要处理的字段并设置对应的条件。
如果有多组条件，可以点击“+”添加多个条件。
<img src="/docs/images/log/2.2.1添加多个条件.png" alt="添加多个条件" />
如需切换逻辑关系，可以点击下拉按钮进行切换。
<img src="/docs/images/log/2.2.1切换逻辑关系.png" alt="切换逻辑关系" /></p>
<h4 id="2参数算法">2、参数算法</h4>
<p>可以对已设置好的字段进行聚合计算，算法包括：计数、求和、求平均、唯一数。</p>
<h4 id="3参数名称">3、参数名称</h4>
<p>在设置策略时，将会用到参数名称，建议设置名称时，表示出该参数的内容，方便后面的应用。
比如：参数为状态码为200的计数时，参数名称可设置为：status_200_count</p>

<blockquote>
  <p>注意：如果不需要设置条件，可以不添加条件。
如：计算uri的唯一数时，可以用如下方式：
<img src="/docs/images/log/2.2.1不添加条件.png" alt="不添加条件" /></p>
</blockquote>

<h2 id="23设置策略">2.3、设置策略</h2>
<p>点击模型中的“设置”，即可进入设置策略页面。
点击“添加”即可开始添加策略。
<img src="/docs/images/log/2.3添加策略.png" alt="不添加条件" />
设置策略主要分7部分：</p>
<h4 id="1策略id">1、策略ID</h4>
<p>是策略的唯一标识，数值约小，优先级越高。</p>
<h4 id="2威胁分数">2、威胁分数</h4>
<p>用来表示威胁的严重程度，可以根据实际场景进行设置。</p>
<h4 id="3策略模式">3、策略模式</h4>
<p>包括：标准和高级两种模式
一般推荐选择“标准模式”
对于复杂的策略，不能用简单的逻辑运算来表达的情况，我们可以用高级模式来实现。
<a href="https://github.com/yunjuhe/atd/blob/master/%E5%8F%AF%E7%BC%96%E7%A8%8B%E5%AF%B9%E6%8A%97-%E9%AB%98%E7%BA%A7%E8%A7%84%E5%88%99.md">查看高级模式</a></p>
<h4 id="4滑动窗口">4、滑动窗口</h4>
<p>可以选择滑动窗口的长度，当前支持1分钟和5分钟两种滑动窗口。</p>
<h4 id="5参数规则">5、参数规则</h4>
<p>可以在参数规则中，选择参数，并设置参数的条件。
<img src="/docs/images/log/2.3参数条件.png" alt="不添加条件" /></p>

<p>条件包括如下6种：</p>

<p><img src="/docs/images/log/2.3条件内容.png" alt="不添加条件" /></p>

<p>此处可以选择参数，也可以输入数值</p>

<p><img src="/docs/images/log/2.3参数值.png" alt="不添加条件" /></p>

<h4 id="6备注">6、备注</h4>
<p>可在备注中，添加策略的描述，方便以后查看。</p>
<h4 id="7策略状态">7、策略状态</h4>
<p>策略状态分3种：</p>
<h5 id="1上线">1、上线</h5>
<p>ATD会匹配上线状态的策略，如果命中了策略，将会为在威胁事件回溯中展示出命中的事件，并支持查看威胁画像。</p>
<h5 id="2测试">2、测试</h5>
<p>ATD会匹配测试状态的策略，如果命中了策略，将会为在威胁事件回溯中展示出命中的事件，并支持查看威胁画像。同时该事件会展示“测试”图标，如果开启拦截，将不会拦截该类事件。</p>
<h5 id="3下线">3、下线</h5>
<p>ATD不再匹配下线状态的策略。
如下图所示，可以根据实际需求，选择策略状态：
<img src="/docs/images/log/策略状态设置.png" alt="策略" /></p>
<h1 id="3可编程对抗模型案例">3、可编程对抗模型案例</h1>
<h2 id="案例一暴力破解成功">【案例一】暴力破解成功</h2>
<blockquote>
  <p>案例场景详情：5分钟内，一个IP成功登录baishancloud.com/user/login的次数大于1次，并且失败的次数大于100次。</p>
  <h5 id="第一步设置模型-1">第一步：设置模型</h5>
  <p>在可编程对抗模型中，点击“添加”按钮，【名称】输入“暴力破解成功”。</p>
  <h5 id="第二步设置参数-1">第二步：设置参数</h5>
  <p>设置两个参数：
1、成功登录的次数
<img src="/docs/images/log/成功登录的次数.png" alt="策略" />
2、失败登录的次数
<img src="/docs/images/log/失败登录的次数.png" alt="策略" /></p>
  <h5 id="第三步设置策略-1">第三步：设置策略</h5>
  <p><img src="/docs/images/log/失败了100次成功了1次.png" alt="策略" /></p>
</blockquote>

<h2 id="案例二竞争对手刷接口">【案例二】竞争对手刷接口</h2>
<blockquote>
  <p>案例场景详情：访问URL： baishancloud.com/user/login，并且referer不能是baidu.com</p>
  <h5 id="第一步设置模型-2">第一步：设置模型</h5>
  <p>在可编程对抗模型中，点击“添加”按钮，【名称】输入“竞争对手刷接口”。</p>
  <h5 id="第二步设置参数-2">第二步：设置参数</h5>
  <p><img src="/docs/images/log/访问某URL并且referfer是百度.png" alt="策略" /></p>
  <h5 id="第三步设置策略-2">第三步：设置策略</h5>
  <p><img src="/docs/images/log/访问某URL并且referer是百度的规则.png" alt="策略" /></p>
</blockquote>

			</article>
		</section>

		<script>
			document.getElementById("open-nav").addEventListener("click", function () {
				document.body.classList.toggle("nav-open");
			});
		</script>
	</body>
</html>
